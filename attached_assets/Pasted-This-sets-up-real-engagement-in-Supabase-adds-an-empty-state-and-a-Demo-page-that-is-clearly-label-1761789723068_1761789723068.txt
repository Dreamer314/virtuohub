This sets up real engagement in Supabase, adds an empty state, and a Demo page that is clearly labeled.

Goal: Make Spotlights production-ready with real likes and comments, but show a clean empty state until real spotlights exist. Include a labeled Demo page for layout preview. Keep current visual style.

1) Supabase: add likes and comments tables (print SQL only, do not run from code):

-- Likes
create table if not exists public.spotlight_likes (
  id bigint generated by default as identity primary key,
  spotlight_id uuid not null references public.spotlights(id) on delete cascade,
  user_id uuid not null references auth.users(id),
  created_at timestamptz not null default now(),
  unique (spotlight_id, user_id)
);
alter table public.spotlight_likes enable row level security;
create policy if not exists "likes readable" on public.spotlight_likes for select using (true);
create policy if not exists "likes insert own" on public.spotlight_likes for insert with check (auth.uid() = user_id);
create policy if not exists "likes delete own" on public.spotlight_likes for delete using (auth.uid() = user_id);

-- Comments
create table if not exists public.spotlight_comments (
  id bigint generated by default as identity primary key,
  spotlight_id uuid not null references public.spotlights(id) on delete cascade,
  user_id uuid references auth.users(id),
  body text not null,
  created_at timestamptz not null default now()
);
alter table public.spotlight_comments enable row level security;
create policy if not exists "comments readable" on public.spotlight_comments for select using (true);
create policy if not exists "comments insert own" on public.spotlight_comments for insert with check (auth.uid() = user_id);
create policy if not exists "comments delete own" on public.spotlight_comments for delete using (auth.uid() = user_id);


2) EngagementSection: move to Supabase on detail pages

On /spotlight/:slug, replace localStorage with Supabase:

Fetch likes count: select('*', { count: 'exact', head: true }).eq('spotlight_id', id)

Check if current user liked: .eq('spotlight_id', id).eq('user_id', user.id)

Like = insert row. Unlike = delete row.

Comments: list by spotlight_id ordered by created_at desc, insert new rows for logged in users.

Keep the same UI. If not logged in, disable the like and comment inputs with a tooltip.

Only implement this on the detail page. On the list page hide counts for now to avoid N queries.

3) Empty state on the list

In pages/spotlights.tsx, after fetching spotlights:list from Supabase:

If zero rows, render a centered empty state block:

Title: “Spotlights are coming soon”

Copy: “We are preparing our first creator features. Check back shortly.”

If import.meta.env.VITE_SPOTLIGHT_DEMO === 'true', show a button “View Demo Layout” that links to /spotlight/demo.

4) Demo spotlight route

Add route /spotlight/demo that renders the same components you created for real spotlights, but with a local fixture object and a clear “Demo” badge at the top.

Do not show likes or comments on this page. Replace the footer with a small note: “Engagement disabled in demo.”

Keep visuals identical to the real template.

5) List page counts

Remove seeded like and comment numbers from list cards. The mini cards should not show counts until we add a lightweight aggregate later. Keep the button and tags.

6) Acceptance

If there are no rows in public.spotlights, the list shows the empty state and, if VITE_SPOTLIGHT_DEMO is true, a Demo link.

/spotlight/demo shows the layout clearly labeled Demo with engagement disabled.

/spotlight/:slug shows real Supabase likes and comments.

No Community feed code or localStorage engagement remains on these pages.

Visual style is unchanged elsewhere.

Return a diff summary and the SQL above.