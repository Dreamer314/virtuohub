Goal
Make VHub Pulse work as a single system. The Community page “VHub Pulse” widget and the /pulse page must both read from and write to the same data. Voting in one place updates the other right away. Active polls auto-move to Completed when they expire. Published Reports list is managed in the same place.

Create a single data module

Create src/data/pulseApi.ts with this API. Use localStorage for persistence. Seed sample data on first load.

// src/data/pulseApi.ts
export type PollOption = { label: string; votes: number };
export type Poll = {
  id: string;               // e.g. "poll_abc123"
  slug: string;             // for routes if needed
  question: string;
  options: PollOption[];    // length 2..6
  createdAt: number;        // ms
  endsAt: number;           // ms in the future
  tags?: string[];          // optional labels
};

export type Report = {
  id: string;
  title: string;
  summary: string;
  releasedAt: number;
  priceType: 'free' | 'paid' | 'private';
  priceCents?: number;      // required if paid
  badges?: string[];        // e.g. ["Platform Data", "Usage"]
  downloadUrl?: string;     // only for free or purchased
};

type Store = {
  polls: Poll[];
  reports: Report[];
  featuredPollIds: string[]; // controls which polls appear in Community widget
  userVotes: Record<string, number>; // pollId -> optionIndex for this browser
};

export const pulseApi = {
  // Load and save
  getStore(): Store,
  saveStore(next: Store): void,

  // Polls
  listActivePolls(now = Date.now()): Poll[],
  listCompletedPolls(now = Date.now()): Poll[],
  getPoll(id: string): Poll | undefined,
  upsertPoll(p: Poll): Poll,               // used by Admin seeding for now
  vote(pollId: string, optionIndex: number): Poll, // throws if already voted or expired
  hasVoted(pollId: string): boolean,

  // Featured controls Community widget
  listFeaturedPolls(): Poll[],
  setFeaturedPollIds(ids: string[]): void,

  // Reports
  listReports(): Report[],
  getReport(id: string): Report | undefined,
  upsertReport(r: Report): Report
};


Implementation notes

Store everything under localStorage["vhub.pulse"].

On first load, seed

2 Active polls (ends in a few days)

4 Completed polls (ended in the past)

3 Reports (one free, one paid, one private)

listActivePolls returns polls with endsAt > now sorted by endsAt soonest.

listCompletedPolls returns polls with endsAt <= now sorted by endedAt newest first.

vote increments the correct option and records userVotes[pollId] = optionIndex. Prevent double voting on this device.

Emit a simple event after any write so other components refresh:

const ch = new BroadcastChannel('vhub-pulse');
function notify(topic: string, payload?: any) { ch.postMessage({ topic, payload }); }
// also listen to window 'storage' for cross-tab sync


Export a helper subscribe(callback) that listens to both BroadcastChannel and storage and calls back so UIs can re-fetch.

Wire the UI to the API

Community page VHub Pulse widget

Replace any hard-coded poll with: const polls = pulseApi.listFeaturedPolls()

If empty, fall back to pulseApi.listActivePolls().slice(0,1)

Render the first poll in your current large card style.

On click of an option, call pulseApi.vote(pollId, index) then re-read the poll and show results.

Subscribe to pulseApi updates so if the user votes on /pulse, the widget updates without a refresh.

/pulse page

Active Polls: pulseApi.listActivePolls()

Each card’s “Participate in Poll” acts like the widget: show options, call vote, then show results.

Completed Polls: pulseApi.listCompletedPolls()

Lock the UI. Show final bars and totals. No voting.

Published Reports: pulseApi.listReports()

Badge “FREE” if priceType === 'free' with a “Download PDF” button that links to downloadUrl if present.

Badge with price if paid, button “Purchase” that opens a simple modal saying “Payments coming soon. Join the mailing list to get access.”

Badge “PRIVATE” if private, button “Access Required” that opens a modal with an email field.

Admin-lite controls for seeding

Add a hidden “Admin” link only visible in dev. It opens a small modal to:

Create a poll with question, options, end date.

Set featured poll ids (comma separated).

Create a report (title, summary, priceType, price).
Store with upsertPoll and upsertReport.

Sync and state

After any vote, upsertPoll, upsertReport, or setFeaturedPollIds, call notify('pulse:changed').

In the Community widget and the /pulse page, call subscribe(() => forceRefresh()).

Empty states and guards

If there are no active polls: show “No active polls. Check back soon.”

If user already voted: show results view directly.

If a poll is expired: hide option buttons and show “Poll ended” with results.

On the widget, if there are multiple featured polls, show dots to switch between them using your existing carousel code.

Acceptance checks

The poll shown in the Community widget also appears under Active Polls on /pulse.

Voting in the widget updates the card on /pulse without a page refresh.

When endsAt passes, the poll moves from Active to Completed on the /pulse page.

Reports section shows Free, Paid, and Private with the correct buttons and badges.

Data survives refresh through localStorage.

UI visuals stay the same as your current design.

Keep current visuals
Reuse your existing cards, typography, paddings, and colors. Only replace the data source and hook up the actions.